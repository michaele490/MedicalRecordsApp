<p style="color: green"><%= notice %></p>

<% content_for :title, "Patients" %>

<h1>Patients</h1>

<div class="container">
  <div class="row justify-content-center">
    <div class="d-flex justify-content-center mt-5">
      <% if receptionist_signed_in? %>
        <%= link_to "Add New patient", new_patient_path, class: 'btn btn-primary' %>
      <% else %>
        <p>Log in as receptionist to add new patients</p>
      <% end %>
    </div>

    <!-- Add search for  patients -->
    <div class="d-flex justify-content-center mt-3">
      <%= form_tag patients_path, method: :get, class: 'form-inline' do %>
        <div class="input-group">
          <%= text_field_tag :search, params[:search], class: 'form-control', placeholder: 'Search patients...' %>
          <%= submit_tag "Search", class: 'btn btn-primary ml-2' %>
        </div>
      <% end %>
    </div>

    <div class="d-flex justify-content-center mt-5">
      <% unless @patients.any? %>
        <p class="text-center"><i>No patients found</i></p>
      <% end %>
    </div>
  </div>

  <div class="row justify-content-center mt-5">
      <table class="table table-striped text-center">
        <thead class="thead-light">
          <tr>
            <th scope="col">Full Name</th>
            <th scope="col">DOB</th>
            <th scope="col">Is Alive</th>
            <th class="col">Phone Number</th>
          </tr>
        </thead>
        <tbody>
          <% @patients.each do |patient| %>
            <tr id="<%= dom_id patient %>">
              <td><%= link_to patient.full_name, patient, class: 'row-link' %></td>
              <td><%= patient.dob %></td>
              <td><%= patient.is_alive %></td>
              <td><%= patient.phone_number %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
  </div>
</div>